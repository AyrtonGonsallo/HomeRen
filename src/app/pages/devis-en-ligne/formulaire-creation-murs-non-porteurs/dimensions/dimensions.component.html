<div class="plaf-dim">
  <form [formGroup]="poseMursNonPorteursForm" (ngSubmit)="onPoseMursNonPorteursSubmit()">
    <div *ngIf="exist_glob_err_form1" class="error-message">
      {{glob_err_form1}}
    </div>
    <div formArrayName="murs_non_porteurs">
      <div *ngFor="let mur of murs_non_porteurs.controls; let i = index" [formGroupName]="i">
        
        <div class="mur-btn-div">
          <span class="mur-ttl">Dimensions du mur {{i + 1}}</span>
          <button
            type="button"
            class="dynamic-form-button del-btn"
            (click)="removeMurNonPorteurroup(i)"
            *ngIf="murs_non_porteurs.length > 1">  <span class="icon-btn">[-] </span>Retirer
          </button>
        </div>
        <div *ngIf="isclicked" class="error-message">
          <div *ngIf="isclicked && murs_non_porteurs.controls[i].get('hauteur')?.invalid" class="error-message">
            La hauteur du mur est invalide.
          </div>
          <div *ngIf="isclicked && murs_non_porteurs.controls[i].get('longueur')?.invalid" class="error-message">
            La longueur du mur est invalide.
          </div>
          <div *ngIf="isclicked && murs_non_porteurs.controls[i].get('epaisseur')?.invalid" class="error-message">
            L'épaisseur est invalide.
          </div>
        </div>
        <div nz-row nzJustify="start" class="ant-col-flx">
          <div nz-col nzSpan="6" class="ant-col tooltip-srf">
            <label for="hauteur">Hauteur (cm)<span class="error-message">*</span> :</label>
            <input type="number" id="hauteur" formControlName="hauteur" min="100" max="500" (keypress)="blockComma($event)"/>
            <!--<div *ngIf="isclicked && murs_non_porteurs.controls[i].get('hauteur')?.invalid" class="error-message">
              La hauteur du mur est invalide.
            </div>-->
          </div>
        
          <div nz-col nzSpan="6" class="ant-col tooltip-srf">
            <label for="longueur">Longueur (cm)<span class="error-message">*</span> :</label>
            <input type="number" id="longueur" formControlName="longueur" min="100" max="3000" (keypress)="blockComma($event)" />
            <!--<div *ngIf="isclicked && murs_non_porteurs.controls[i].get('longueur')?.invalid" class="error-message">
              La longueur du mur est invalide.
            </div>-->
          </div>
          
        </div>
        <div nz-col>
        <div nz-col class="row-w-grid">
          <label for="epaisseur">Epaisseur (cm)<span class="error-message">*</span> :</label>
          <nz-radio-group formControlName="epaisseur" class="flx-radio-row">
            <div>
              <label nz-radio nzValue="5"> 5</label>
            </div>
            <div>
              <label nz-radio nzValue="7"> 7</label>
            </div>
            <div>
              <label nz-radio nzValue="10"> 10</label>
            </div>
            <div>
              <label nz-radio nzValue="0"> supérieur à 10</label>
            </div>
           
          </nz-radio-group> 
          <!--<div *ngIf="isclicked && murs_non_porteurs.controls[i].get('epaisseur')?.invalid" class="error-message">
          L'épaisseur est invalide.
        </div>-->
        
        </div>

      </div>

        
  </div>
  <div class="col-w-75">
    <button type="button"  class="dynamic-form-button add-btn" (click)="addMurNonPorteurroup()"  *ngIf="murs_non_porteurs.length < 4">
        [+] Ajouter un mur </button></div>
    </div>
    
  </form>
  
  <nz-collapse class="row-w-collapse">
    <nz-collapse-panel
      nzHeader="Ajouter des portes"
      [nzActive]="is_active_Tp3"
      [nzExtra]="activerTp3"
      nzShowArrow="false"
      (nzActiveChange)="active_Tp3()"
    >
      <form [formGroup]="portesForm" (ngSubmit)="onPosePortesSubmit()">
        <div *ngIf="exist_glob_err_form2" class="error-message">
          {{glob_err_form2}}
        </div>
        <div formArrayName="portes">
          <div *ngFor="let mur of portes.controls; let i = index" [formGroupName]="i">
            <div class="mur-btn-div coll-100">
              <span class="mur-ttl">Caractéristiques de la porte nº{{i + 1}}</span>
              <button
                type="button"
                class="dynamic-form-button del-btn"
                (click)="removeportesGroup(i)"
                *ngIf="portes.length > 1"
              >
              <span class="icon-btn">[-]</span> Retirer
              </button>
            </div>
            <div *ngIf="isclicked" class="error-message">
              <div *ngIf="isclicked && portes.controls[i].get('largeur')?.invalid " class="error-message">
                La largeur est requise.
              </div>
              <div *ngIf="isclicked && portes.controls[i].get('gamme')?.invalid " class="error-message">
                La gamme est requise.
              </div>
            </div>
              <div nz-col class="row-w-grid coll-100">
                <label for="largeur">Largeur (cm)<span class="error-message" *ngIf="is_active_Tp3">*</span> :  </label>
                <nz-radio-group formControlName="largeur" class="flx-radio-row">
                  <div>
                    <label nz-radio nzValue="60"> 60</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="70"> 70</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="80"> 80</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="90"> 90</label>
                  </div>
                
                </nz-radio-group> 
                 <!--<div *ngIf="isclicked && portes.controls[i].get('largeur')?.invalid " class="error-message">
                La largeur est invalide.
              </div>-->
              </div>

              <div nz-col class="row-w-grid coll-100">
                <label for="epaisseur">Epaisseur (cm)<span class="error-message">*</span> :</label>
                <nz-radio-group formControlName="epaisseur" class="flx-radio-row">
                  <div>
                    <label nz-radio nzValue="5"> 5</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="7"> 7</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="10"> 10</label>
                  </div>
                  <div>
                    <label nz-radio nzValue="0"> supérieur à 10</label>
                  </div>
                 
                </nz-radio-group> 
              
              </div>
              

              <div nz-col class="row-w-grid coll-100 ant-col">
                <label for="gamme">Gamme <span class="error-message" *ngIf="is_active_Tp3">*</span> :  </label>
                <nz-radio-group formControlName="gamme" class="flx-radio-row1 w-100">

                  <ng-container *ngIf="portes.controls[i].get('epaisseur')?.value === '5'">
                    <div *ngFor="let option of gammes1" class="flex-see-gamme">
                      <label nz-radio [nzValue]="option.ID + ':' + option.Prix + ':' + option.Label" class="with-link">
                        <span>{{ option.Label }}</span>
                      </label>
                      <span class="w-100">
                        <a *ngIf="option.Pdf" target="_blank" class="see-gamme-link" [href]="baseurl + option.Pdf">Voir la gamme</a>
                      </span>
                    </div>
                  </ng-container>
                
                  <ng-container *ngIf="portes.controls[i].get('epaisseur')?.value === '7'">
                    <div *ngFor="let option of gammes2" class="flex-see-gamme">
                      <label nz-radio [nzValue]="option.ID + ':' + option.Prix + ':' + option.Label" class="with-link">
                        <span>{{ option.Label }}</span>
                      </label>
                      <span class="w-100">
                        <a *ngIf="option.Pdf" target="_blank" class="see-gamme-link" [href]="baseurl + option.Pdf">Voir la gamme</a>
                      </span>
                    </div>
                  </ng-container>
                
                  <ng-container *ngIf="portes.controls[i].get('epaisseur')?.value === '10'">
                    <div *ngFor="let option of gammes3" class="flex-see-gamme">
                      <label nz-radio [nzValue]="option.ID + ':' + option.Prix + ':' + option.Label" class="with-link">
                        <span>{{ option.Label }}</span>
                      </label>
                      <span class="w-100">
                        <a *ngIf="option.Pdf" target="_blank" class="see-gamme-link" [href]="baseurl + option.Pdf">Voir la gamme</a>
                      </span>
                    </div>
                  </ng-container>
                
                  <ng-container *ngIf="portes.controls[i].get('epaisseur')?.value === '0'">
                    <div *ngFor="let option of gammes4" class="flex-see-gamme">
                      <label nz-radio [nzValue]="option.ID + ':' + option.Prix + ':' + option.Label" class="with-link">
                        <span>{{ option.Label }}</span>
                      </label>
                      <span class="w-100">
                        <a *ngIf="option.Pdf" target="_blank" class="see-gamme-link" [href]="baseurl + option.Pdf">Voir la gamme</a>
                      </span>
                    </div>
                  </ng-container>
                
                </nz-radio-group>
                
            </div>
            
          </div>
          
        </div>
        <div class="col-w-75 coll-100">
          <button type="button" class="dynamic-form-button add-btn" (click)="addportesGroup()"
          *ngIf="portes.length < 5">  [+] Ajouter une porte</button></div>
      </form>
    </nz-collapse-panel>
  </nz-collapse>
</div>
<ng-template #activerTp3>
  <label nz-checkbox [(ngModel)]="is_active_Tp3"></label>
</ng-template>
